local NoxUI = {}

local library = {}
library.ScreenGui = Instance.new("ScreenGui")
library.ScreenGui.Name = "NoxUI"
library.ScreenGui.ResetOnSpawn = false
library.ScreenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

local function createUI(class, parent, properties)
    local obj = Instance.new(class)
    for prop, value in pairs(properties or {}) do
        obj[prop] = value
    end
    obj.Parent = parent
    return obj
end

local Page = {}
Page.__index = Page

function Page:AddButton(text, callback)
    local button = createUI("TextButton", self.Frame, {
        Text = text,
        Size = UDim2.new(0, 280, 0, 50),
        Position = UDim2.new(0, 10, 0, #self.Elements * 60 + 10),
        BackgroundColor3 = Color3.fromRGB(70, 70, 70),
        TextColor3 = Color3.fromRGB(255, 255, 255)
    })
    button.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
    table.insert(self.Elements, button)
end

function Page:AddToggle(text, callback)
    local index = #self.Elements
    local toggle = createUI("TextButton", self.Frame, {
        Text = text,
        Size = UDim2.new(0, 280, 0, 50),
        Position = UDim2.new(0, 10, 0, index * 60 + 10),
        BackgroundColor3 = Color3.fromRGB(70, 70, 70),
        TextColor3 = Color3.fromRGB(255, 255, 255)
    })
    local indicator = createUI("Frame", self.Frame, {
        Size = UDim2.new(0, 280, 0, 10),
        Position = toggle.Position + UDim2.new(0, 0, 1, 0),
        BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    })
    local toggled = false
    toggle.MouseButton1Click:Connect(function()
        toggled = not toggled
        indicator.BackgroundColor3 = toggled and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        if callback then callback(toggled) end
    end)
    table.insert(self.Elements, toggle)
end

function Page:AddBox(placeholder, callback)
    local index = #self.Elements
    local box = createUI("TextBox", self.Frame, {
        PlaceholderText = placeholder or "",
        Size = UDim2.new(0, 280, 0, 50),
        Position = UDim2.new(0, 10, 0, index * 60 + 10),
        BackgroundColor3 = Color3.fromRGB(70, 70, 70),
        TextColor3 = Color3.fromRGB(255, 255, 255)
    })
    box.FocusLost:Connect(function(enterPressed)
        if enterPressed and callback then callback(box.Text) end
    end)
    table.insert(self.Elements, box)
end

function NoxUI.addPage(name)
    local pageFrame = createUI("Frame", library.ScreenGui, {
        Name = name,
        Size = UDim2.new(0, 300, 0, 400),
        Position = UDim2.new(0.5, -150, 0.5, -200),
        BackgroundColor3 = Color3.fromRGB(50, 50, 50),
        BorderSizePixel = 0
    })
    local page = setmetatable({Frame = pageFrame, Elements = {}}, Page)
    return page
end

return NoxUI
